<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Demo</title>
  </head>
  <body></body>
  <script src="index.js"></script>
  <script>
    const game = setUpGame(window);
    game.addSprite(
      "shipright",
      "#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00..#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00....#ce2a00.#041ece.#041ece.#ce2a00.....#ce2a00.#041ece.#041ece.#ce2a00.....#ce2a00.#ce2a00.#ce2a00.#ce2a00......#ce2a00.#ce2a00.......#ce2a00.#ce2a00..."
    );
    game.addSprite(
      "shipup",
      "......#ce2a00.#ce2a00......#ce2a00.#ce2a00.#ce2a00...#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#041ece.#041ece.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#041ece.#041ece.#ce2a00.#ce2a00.#ce2a00...#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00......#ce2a00.#ce2a00.#ce2a00.......#ce2a00.#ce2a00"
    );
    game.addSprite(
      "shipleft",
      "...#ce2a00.#ce2a00.......#ce2a00.#ce2a00......#ce2a00.#ce2a00.#ce2a00.#ce2a00.....#ce2a00.#041ece.#041ece.#ce2a00.....#ce2a00.#041ece.#041ece.#ce2a00....#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00..#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00"
    );
    game.addSprite(
      "shipdown",
      "#ce2a00.#ce2a00.......#ce2a00.#ce2a00.#ce2a00......#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00...#ce2a00.#ce2a00.#ce2a00.#041ece.#041ece.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#041ece.#041ece.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00.#ce2a00...#ce2a00.#ce2a00.#ce2a00......#ce2a00.#ce2a00......"
    );
    game.addSprite(
      "end",
      "........................................#70706d.#70706d.#70706d.#70706d.#70706d.#70706d.#70706d.#70706d.#fefff8.#050505.#fefff8.#050505.#fefff8.#000000.#fefff8.#050505.#050505.#fefff8.#050505.#fefff8.#050505.#fefff8.#050505.#fefff8"
    );
    game.addSprite(
      "box",
      "#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.......#ce2ade.#ce2ade.......#ce2ade.#ce2ade.......#ce2ade.#ce2ade.......#ce2ade.#ce2ade.......#ce2ade.#ce2ade.......#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade.#ce2ade"
    );

    let x = 0;
    let y = 0;
    let boxes = [];
    for (let i = 0; i < 5; i++) {
      boxes.push([
        Math.random() * 92,
        Math.random() * 92,
        Math.random() * 2,
        Math.random() * 2,
      ]);
    }
    let direction = "up";
    let z = true;
    game.update = () => {
      if (game.key("right")) {
        direction = "right";
        x++;
      }
      if (game.key("left")) {
        direction = "left";
        x--;
      }
      if (game.key("up")) {
        direction = "up";
        y--;
      }
      if (game.key("down")) {
        direction = "down";
        y++;
      }
      if (game.key("z")) {
        if (z) {
          game.sound("no");
          z = false;
        }
      } else {
        z = true;
      }
      boxes = boxes.map(([x2, y2, x3, y3]) => {
        if (x2 <= 0 || x2 >= 92) {
          x3 = -x3;
          game.sound("chirp");
        }
        if (y2 <= 0 || y2 >= 92) {
          y3 = -y3;
          game.sound("chirp");
        }
        x2 += x3;
        y2 += y3;
        return [x2, y2, x3, y3];
      });
    };

    game.draw = () => {
      for (let i = 0; i * 8 < 100; i++) {
        game.sprite("end", 92, i * 8);
      }
      game.sprite("ship" + direction, x, y);
      game.sprite("shipright", game.time / 9, 8);
      game.sprite("shipright", game.time / 8, 16);
      game.sprite("shipright", game.time / 7, 24);
      boxes.forEach(([x2, y2]) => {
        game.sprite("box", x2, y2);
      });
    };
  </script>
</html>
